<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="js/vue.min.js"></script>
	<style>
		.fl{
            float: left;
        }
        .fr{
            float: right;
        }
       blockquote, body, dd, div, dl, dt, fieldset, form, h1, h2, h3, h4, h5, h6, img, input, li, ol, p, table, td, textarea, th, ul {
            margin: 0;
            padding: 0;
        }
       .clearfix{
          zoom: 1;
       }
        .clearfix:after {
            clear: both;
        }
        .clearfix:after {
            content: '.';
            display: block;
            overflow: hidden;
            visibility: hidden;
            font-size: 0;
            line-height: 0;
            width: 0;
            height: 0;
        }
        a{
            text-decoration: none;
            color: #333;
        }
        img{vertical-align: middle;}
        .page-shopping-cart {
            width: 1200px;
            margin: 50px auto;
            font-size: 14px;
            border: 1px solid #e3e3e3;
            border-top: 2px solid #317ee7; }
        .page-shopping-cart .cart-title {
            color: #317ee7;
            font-size: 16px;
            text-align: left;
            padding-left: 20px;
            line-height: 68px; }
        .page-shopping-cart .red-text {
            color: #e94826; }
        .page-shopping-cart .check-span {
            display: inline-block;
            width: 20px;
            height: 20px;
            background-image: url("img/select.png"); 
            -webkit-background-size: 100% 100%;
            background-size: 100% 100%;}
        .page-shopping-cart .check-span.check-true {
            background-image: url("img/selected.png"); 
            -webkit-background-size: 100% 100%;
            background-size: 100% 100%;}
        .page-shopping-cart .td-check {
            width: 70px; }
        .page-shopping-cart .td-product {
            width: 460px; }
        .page-shopping-cart .td-num, .page-shopping-cart .td-price, .page-shopping-cart .td-total {
            width: 160px; }
        .page-shopping-cart .td-do {
            width: 150px; }
        .page-shopping-cart .cart-product-title {
            text-align: center;
            height: 38px;
            line-height: 38px;
            padding: 0 20px;
            background: #f7f7f7;
            border-top: 1px solid #e3e3e3;
            border-bottom: 1px solid #e3e3e3; }
        .page-shopping-cart .cart-product-title .td-product {
            text-align: center;
            font-size: 14px; }
        .page-shopping-cart .cart-product-title .td-check {
            text-align: left; }
        .page-shopping-cart .cart-product-title .td-check .check-span {
            margin: 9px 6px 0 0; }
        .page-shopping-cart .cart-product {
            padding: 0 20px;
            text-align: center; }
        .page-shopping-cart .cart-product table {
            width: 100%;
            text-align: center;
            font-size: 14px; }
        .page-shopping-cart .cart-product table td {
            padding: 20px 0; }
        .page-shopping-cart .cart-product table tr {
            border-bottom: 1px dashed #e3e3e3; }
        .page-shopping-cart .cart-product table tr:last-child {
            border-bottom: none; }
        .page-shopping-cart .cart-product table .product-num {
            border: 1px solid #e3e3e3;
            display: inline-block;
            text-align: center; }
        .page-shopping-cart .cart-product table .product-num .num-do {
            width: 24px;
            height: 28px;
            display: block;
            background: #f7f7f7; 
            text-align: center;
            line-height: 28px;
        }
        /*.page-shopping-cart .cart-product table .product-num .num-reduce span {
            background: url("shopping_cart.png") no-repeat -40px -22px;
            display: block;
            width: 6px;
            height: 2px;
            margin: 13px auto 0 auto; }
        .page-shopping-cart .cart-product table .product-num .num-add span {
            background: url("shopping_cart.png") no-repeat -60px -22px;
            display: block;
            width: 8px;
            height: 8px;
            margin: 10px auto 0 auto; }*/
        .page-shopping-cart .cart-product table .product-num .num-input {
            width: 42px;
            height: 28px;
            line-height: 28px;
            border: none;
            text-align: center; }
        .page-shopping-cart .cart-product table .td-product {
            text-align: left;
            font-size: 12px;
            line-height: 20px; }
        .page-shopping-cart .cart-product table .td-product img {
            border: 1px solid #e3e3e3;
            margin-right: 10px; }
        .page-shopping-cart .cart-product table .td-product .product-info {
            display: inline-block;
            vertical-align: middle; }
        .page-shopping-cart .cart-product table .td-do {
            font-size: 12px; }
        .page-shopping-cart .cart-product-info {
            height: 50px;
            line-height: 50px;
            background: #f7f7f7;
            padding-left: 20px; }
        .page-shopping-cart .cart-product-info .delect-product {
            color: #666; }
        .page-shopping-cart .cart-product-info .delect-product span {
            display: inline-block;
            vertical-align: top;
            margin: 18px 8px 0 0;
            width: 13px;
            height: 15px;
            background: url("shopping_cart.png") no-repeat -60px 0; }
        .page-shopping-cart .cart-product-info .product-total {
            font-size: 14px;
            color: #e94826; }
        .page-shopping-cart .cart-product-info .product-total span {
            font-size: 20px; }
        .page-shopping-cart .cart-product-info .check-num {
            color: #333; }
        .page-shopping-cart .cart-product-info .check-num span {
            color: #e94826; }
        .page-shopping-cart .cart-product-info .keep-shopping {
            color: #666;
            margin-left: 40px; }
        .page-shopping-cart .cart-product-info .keep-shopping span {
            display: inline-block;
            vertical-align: top;
            margin: 18px 8px 0 0;
            width: 15px;
            height: 15px;
            background: url("shopping_cart.png") no-repeat -40px 0; }
        .page-shopping-cart .cart-product-info .btn-buy {
            height: 50px;
            color: #fff;
            font-size: 20px;
            display: block;
            width: 110px;
            background: #ff7700;
            text-align: center;
            margin-left: 30px; }
        .page-shopping-cart .cart-worder {
            padding: 20px; }
        .page-shopping-cart .cart-worder .choose-worder {
            color: #fff;
            display: block;
            background: #39e;
            width: 140px;
            height: 40px;
            line-height: 40px;
            border-radius: 4px;
            text-align: center;
            margin-right: 20px; }
        .page-shopping-cart .cart-worder .choose-worder span {
            display: inline-block;
            vertical-align: top;
            margin: 9px 10px 0 0;
            width: 22px;
            height: 22px;
            background: url("shopping_cart.png") no-repeat -92px 0; }
        .page-shopping-cart .cart-worder .worker-info {
            color: #666; }
        .page-shopping-cart .cart-worder .worker-info img {
            border-radius: 100%;
            margin-right: 10px; }
        .page-shopping-cart .cart-worder .worker-info span {
            color: #000; }

        .choose-worker-box {
            width: 620px;
            background: #fff; }
        .choose-worker-box .box-title {
            height: 40px;
            line-height: 40px;
            background: #F7F7F7;
            text-align: center;
            position: relative;
            font-size: 14px; }
        .choose-worker-box .box-title a {
            display: block;
            position: absolute;
            top: 15px;
            right: 16px;
            width: 10px;
            height: 10px;
            background: url("shopping_cart.png") no-repeat -80px 0; }
        .choose-worker-box .box-title a:hover {
            background: url("shopping_cart.png") no-repeat -80px -22px; }
        .choose-worker-box .worker-list {
            padding-top: 30px;
            height: 134px;
            overflow-y: auto; }
        .choose-worker-box .worker-list li {
            float: left;
            width: 25%;
            text-align: center;
            margin-bottom: 30px; }
        .choose-worker-box .worker-list li p {
            margin-top: 8px; }
        .choose-worker-box .worker-list li.cur a {
            color: #f70; }
        .choose-worker-box .worker-list li.cur a img {
            border: 1px solid #f70; }
        .choose-worker-box .worker-list li a:hover {
            color: #f70; }
        .choose-worker-box .worker-list li a:hover img {
            border: 1px solid #f70; }
        .choose-worker-box .worker-list li img {
            border: 1px solid #fff;
            border-radius: 100%; }
    </style>
</head>
<body>
	<div class="page-shopping-cart" id="app">
		<h4 class="cart-title">购物清单</h4>
		<div class="cart-product-title clearfix">
			<div class="td-check fl"><span class="check-span f1 check-all" v-on:click="getSelectAll(isSelectAll)" v-bind:class=" {'check-true':isSelectAll}"></span>全选</div>
			<div class="td-product fl">商品</div>
			<div class="td-num fl">数量</div>
			<div class="td-price fl">单价（元）</div>
			<div class="td-total fl">金额（元）</div>
			<div class="td-do fl">操作</div>
		</div>
		<div class="cart-product clearfix">
			<table>
				<tr v-for="(pro,index) in productList">
					<td class="td-check"><span class="check-span" v-on:click="pro.select=!pro.select" v-bind:class=" {'check-true':pro.select}"></span></td>
					<td class="td-product">
						<img v-bind:src="pro.pro_img" width="100" height="100">
						<div class="product-info">
							<h6>{{pro.pro_name}}</h6>
							<p>{{pro.pro_place}}</p>
							<p>{{pro.pro_depot}}</p>
						</div>
						<div class="clearfix"></div>
					</td>
					<td class="td-num">
                        <div class="product-num">
                            <a href="javascript:;" class="num-reduce num-do fl" v-on:click="if(pro.pro_num>1){pro.pro_num--;}">-</a>
                            <input type="text" class="num-input" v-bind:value="pro.pro_num">
                            <a href="javascript:;" class="num-add num-do fr" v-on:click="pro.pro_num++">+</a>
                        </div>
					</td>
					<td class="td-price">
						<p class="red-text">￥<span class="price-text">{{pro.pro_price.toFixed(2)}}</span></p>
					</td>
					<td class="td-total">
						<p class="red-text">￥<span class="total-text">{{pro.pro_price.toFixed(2)*pro.pro_num}}</span></p>
					</td>
					<td class="td-do"><a href="javascript:;" class="product-delect" v-on:click="singleDel(index)">删除</a></td>
				</tr>
			</table>
		</div>
        <div class="cart-product-info">
            <a href="javascript:;" class="delect-product" v-on:click="delPro()"><span></span>删除所选商品</a>
            <a href="javascript:;" class="btn-buy fr">去结算</a>
            <p class="fr product-total">￥<span>{{getTotal.totalPrice}}</span></p>
            <p class="fr check-num"><span>{{getTotal.totalLen}}</span>件商品总计（不含运费）：</p>
        </div>
	</div>
</body>
<script>
	var app = new Vue({
		el: "#app",
		data:{
            selectAll: false,
			productList:[
				{
					pro_name: "klorane",
					pro_place: "美国",
					pro_depot: "上海",
					pro_num: 1,
					pro_img: "img/img_klorane.jpg",
					pro_price: 200,
				},
				{
					pro_name: "molton",
					pro_place: "美国",
					pro_depot: "上海",
					pro_num: 1,
					pro_img: "img/img_molton.jpg",
					pro_price: 800,
				},
				{
					pro_name: "noah",
					pro_place: "美国",
					pro_depot: "上海",
					pro_num: 1,
					pro_img: "img/img_noah.jpg",
					pro_price: 100,
				},
				{
					pro_name: "oway",
					pro_place: "美国",
					pro_depot: "上海",
					pro_num: 1,
					pro_img: "img/img_oway.jpg",
					pro_price: 200,
				},
				{
					pro_name: "pomandere",
					pro_place: "美国",
					pro_depot: "上海",
					pro_num: 1,
					pro_img: "img/img_pomandere.jpg",
					pro_price: 600,
				},
				{
					pro_name: "previa",
					pro_place: "美国",
					pro_depot: "上海",
					pro_num: 1,
					pro_img: "img/img_previa.jpg",
					pro_price: 500,
				}
			],
		},
		mounted:function(){
			var _this = this;
			this.productList.map(function(item){
				_this.$set(item,'select',false); //添加属性
			});  //map遍历
		},
        computed:{

            // 单选影响全选
            isSelectAll:function(){
                if(this.productList.length == 0){
                    return false;
                }
                return this.productList.every(function(val){
                    console.log(val.select);
                    return val.select
                });
            },

            // 计算总金额和选中件数
            getTotal:function(){
                var totalLen = 0;
                var _list = this.productList.filter(function(val){
                    return val.select;
                })
                totalLen = _list.length;
                var totalPrice = 0;
                for(var i=0;i<_list.length;i++){
                    totalPrice += _list[i].pro_price*_list[i].pro_num;
                }

                    console.log(totalPrice)
                return {'totalLen':totalLen,'totalPrice':totalPrice};
            }
        },
        methods:{
            // 全选影响单选
            getSelectAll:function(_isSelect){
                for(var i=0;i<this.productList.length;i++){
                    this.productList[i].select = !_isSelect;
                }
                // this.isSelectAll = !_isSelect;
            },
            // 删除选中商品
            delPro:function(){
                var _list = this.productList.filter(function(val){return !val.select});
                this.productList = _list;
            },
            // 删除指定产品
            singleDel:function(index){
                this.productList.splice(index,1);
            },
        }
	});
</script>
</html>